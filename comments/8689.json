[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/280725559",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-280725559",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 280725559,
    "user": {
      "login": "groundwater",
      "id": 538488,
      "avatar_url": "https://avatars3.githubusercontent.com/u/538488?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/groundwater",
      "html_url": "https://github.com/groundwater",
      "followers_url": "https://api.github.com/users/groundwater/followers",
      "following_url": "https://api.github.com/users/groundwater/following{/other_user}",
      "gists_url": "https://api.github.com/users/groundwater/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/groundwater/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/groundwater/subscriptions",
      "organizations_url": "https://api.github.com/users/groundwater/orgs",
      "repos_url": "https://api.github.com/users/groundwater/repos",
      "events_url": "https://api.github.com/users/groundwater/events{/privacy}",
      "received_events_url": "https://api.github.com/users/groundwater/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-17T18:15:10Z",
    "updated_at": "2017-02-17T18:15:10Z",
    "body": "Hi @pronebird, thanks for testing out 1.5.0!\r\n\r\nDo you know if this behavior also exists on 1.4.15? I am curious if this is a regression or a new feature we can look into adding.\r\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/280731310",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-280731310",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 280731310,
    "user": {
      "login": "pronebird",
      "id": 704044,
      "avatar_url": "https://avatars1.githubusercontent.com/u/704044?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pronebird",
      "html_url": "https://github.com/pronebird",
      "followers_url": "https://api.github.com/users/pronebird/followers",
      "following_url": "https://api.github.com/users/pronebird/following{/other_user}",
      "gists_url": "https://api.github.com/users/pronebird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pronebird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pronebird/subscriptions",
      "organizations_url": "https://api.github.com/users/pronebird/orgs",
      "repos_url": "https://api.github.com/users/pronebird/repos",
      "events_url": "https://api.github.com/users/pronebird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pronebird/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-17T18:38:57Z",
    "updated_at": "2017-02-17T18:39:35Z",
    "body": "@groundwater sorry it turns out my electron updated to 1.6.0 according to `npm list | grep electron`. I tested with 1.4.15 and it's the same. \r\n\r\nI don't think it's regression. I think everything works fine for Tray created with context menu (`Menu`). However my Tray is quite custom since it display a BrowserWindow below menubar icon (just like Dropbox for macOS).\r\n\r\nI looked through some samples of creating popovers on macOS and it seems that once popover is displayed a global click listener is assigned and used to track clicks outside of popover to dismiss it and potentially remove highlight from menubar icon when user clicks somewhere else on screen.\r\n\r\nIt feels like it would be great to have some event for this since there is a growing number of menubar apps that are currently being built using BrowserWindows positioned below menu item.\r\n\r\nIn swift it looks as such:\r\n\r\n```swift\r\nself.monitor = NSEvent.addGlobalMonitorForEvents(matching: .leftMouseDown, handler: {\r\n    statusButton.highlight(false)\r\n    NSEvent.removeMonitor(self.monitor)\r\n})\r\n```"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/280766528",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-280766528",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 280766528,
    "user": {
      "login": "zeke",
      "id": 2289,
      "avatar_url": "https://avatars2.githubusercontent.com/u/2289?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zeke",
      "html_url": "https://github.com/zeke",
      "followers_url": "https://api.github.com/users/zeke/followers",
      "following_url": "https://api.github.com/users/zeke/following{/other_user}",
      "gists_url": "https://api.github.com/users/zeke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zeke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zeke/subscriptions",
      "organizations_url": "https://api.github.com/users/zeke/orgs",
      "repos_url": "https://api.github.com/users/zeke/repos",
      "events_url": "https://api.github.com/users/zeke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zeke/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-17T21:06:49Z",
    "updated_at": "2017-02-17T21:06:49Z",
    "body": "@pronebird I think the `blur` event is what you're looking for:\r\n\r\n```js\r\nwindow.on('blur', () => {\r\n  window.hide();\r\n});\r\n```"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/280768067",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-280768067",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 280768067,
    "user": {
      "login": "pronebird",
      "id": 704044,
      "avatar_url": "https://avatars1.githubusercontent.com/u/704044?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pronebird",
      "html_url": "https://github.com/pronebird",
      "followers_url": "https://api.github.com/users/pronebird/followers",
      "following_url": "https://api.github.com/users/pronebird/following{/other_user}",
      "gists_url": "https://api.github.com/users/pronebird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pronebird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pronebird/subscriptions",
      "organizations_url": "https://api.github.com/users/pronebird/orgs",
      "repos_url": "https://api.github.com/users/pronebird/repos",
      "events_url": "https://api.github.com/users/pronebird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pronebird/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-17T21:13:57Z",
    "updated_at": "2017-02-17T21:13:57Z",
    "body": "@zeke unfortunately that does not seem to work with other context menus or popovers on macOS. It works if I switch to other app though."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/280947132",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-280947132",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 280947132,
    "user": {
      "login": "pronebird",
      "id": 704044,
      "avatar_url": "https://avatars1.githubusercontent.com/u/704044?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pronebird",
      "html_url": "https://github.com/pronebird",
      "followers_url": "https://api.github.com/users/pronebird/followers",
      "following_url": "https://api.github.com/users/pronebird/following{/other_user}",
      "gists_url": "https://api.github.com/users/pronebird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pronebird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pronebird/subscriptions",
      "organizations_url": "https://api.github.com/users/pronebird/orgs",
      "repos_url": "https://api.github.com/users/pronebird/repos",
      "events_url": "https://api.github.com/users/pronebird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pronebird/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-19T20:40:51Z",
    "updated_at": "2017-02-19T20:40:51Z",
    "body": "Since I don't see how to solve that without talking to macOS, I made a simple extension to be able to work with `NSEvent` directly to dismiss `BrowserWindow` when clicks are being dispatched to other apps.\r\n\r\nhttps://github.com/pronebird/NSEventMonitor"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281752069",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-281752069",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 281752069,
    "user": {
      "login": "zeke",
      "id": 2289,
      "avatar_url": "https://avatars2.githubusercontent.com/u/2289?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zeke",
      "html_url": "https://github.com/zeke",
      "followers_url": "https://api.github.com/users/zeke/followers",
      "following_url": "https://api.github.com/users/zeke/following{/other_user}",
      "gists_url": "https://api.github.com/users/zeke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zeke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zeke/subscriptions",
      "organizations_url": "https://api.github.com/users/zeke/orgs",
      "repos_url": "https://api.github.com/users/zeke/repos",
      "events_url": "https://api.github.com/users/zeke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zeke/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-22T18:08:07Z",
    "updated_at": "2017-02-22T18:08:07Z",
    "body": ">   I made a simple extension to be able to work with `NSEvent` directly\r\n\r\nAwesome that you were able to work around the problem. üëç\r\n\r\nHowever this still seems like something that should be fixed in Electron. To recap, I think the fundamental issue here is that the `blur` event is not triggered on the BrowserWindow instance when _other_ tray/menubar items are clicked."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281753309",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-281753309",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 281753309,
    "user": {
      "login": "pronebird",
      "id": 704044,
      "avatar_url": "https://avatars1.githubusercontent.com/u/704044?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pronebird",
      "html_url": "https://github.com/pronebird",
      "followers_url": "https://api.github.com/users/pronebird/followers",
      "following_url": "https://api.github.com/users/pronebird/following{/other_user}",
      "gists_url": "https://api.github.com/users/pronebird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pronebird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pronebird/subscriptions",
      "organizations_url": "https://api.github.com/users/pronebird/orgs",
      "repos_url": "https://api.github.com/users/pronebird/repos",
      "events_url": "https://api.github.com/users/pronebird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pronebird/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-22T18:12:30Z",
    "updated_at": "2017-02-22T18:13:10Z",
    "body": "@zeke I don't think it's a bug. If you have macOS handy open Finder and click on Dropbox icon in menubar which will display popover leaving Finder window active. This seems to be valid behavior on macOS, therefore I don't think there is something wrong with BrowserWindow."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281780680",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-281780680",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 281780680,
    "user": {
      "login": "zeke",
      "id": 2289,
      "avatar_url": "https://avatars2.githubusercontent.com/u/2289?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zeke",
      "html_url": "https://github.com/zeke",
      "followers_url": "https://api.github.com/users/zeke/followers",
      "following_url": "https://api.github.com/users/zeke/following{/other_user}",
      "gists_url": "https://api.github.com/users/zeke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zeke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zeke/subscriptions",
      "organizations_url": "https://api.github.com/users/zeke/orgs",
      "repos_url": "https://api.github.com/users/zeke/repos",
      "events_url": "https://api.github.com/users/zeke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zeke/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-22T19:44:34Z",
    "updated_at": "2017-02-22T19:44:34Z",
    "body": "The behavior seems to vary based on the clicked app.\r\n\r\nGoogle Drive, CloudUp, ScreeHero: window is blurred\r\nSlack, DropBox, OnePassword: window stays active"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/283004390",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-283004390",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 283004390,
    "user": {
      "login": "pronebird",
      "id": 704044,
      "avatar_url": "https://avatars1.githubusercontent.com/u/704044?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pronebird",
      "html_url": "https://github.com/pronebird",
      "followers_url": "https://api.github.com/users/pronebird/followers",
      "following_url": "https://api.github.com/users/pronebird/following{/other_user}",
      "gists_url": "https://api.github.com/users/pronebird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pronebird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pronebird/subscriptions",
      "organizations_url": "https://api.github.com/users/pronebird/orgs",
      "repos_url": "https://api.github.com/users/pronebird/repos",
      "events_url": "https://api.github.com/users/pronebird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pronebird/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-28T10:37:24Z",
    "updated_at": "2017-02-28T10:37:24Z",
    "body": "It seems that in case of `NSPopover` background windows stay the same, but some apps implement popover using `NSWindow` which certainly switches focus when displayed. Most likely it's different on other operating systems. I don't have the right answer at the moment. Would be great if others could chime in so we could work out the average solution."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/283736576",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-283736576",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 283736576,
    "user": {
      "login": "zeke",
      "id": 2289,
      "avatar_url": "https://avatars2.githubusercontent.com/u/2289?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zeke",
      "html_url": "https://github.com/zeke",
      "followers_url": "https://api.github.com/users/zeke/followers",
      "following_url": "https://api.github.com/users/zeke/following{/other_user}",
      "gists_url": "https://api.github.com/users/zeke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zeke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zeke/subscriptions",
      "organizations_url": "https://api.github.com/users/zeke/orgs",
      "repos_url": "https://api.github.com/users/zeke/repos",
      "events_url": "https://api.github.com/users/zeke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zeke/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-03-02T18:25:10Z",
    "updated_at": "2017-03-02T18:25:10Z",
    "body": "@pronebird I discussed this issue with the team last week. Here's what we came up with: For now, let's add a note to Electron's [Tray](https://electron.atom.io/docs/api/tray/) docs describing this scenario and link to your [NSEventMonitor](https://github.com/pronebird/NSEventMonitor) module as a workaround for those who need it.\r\n\r\nThinking more long term, @kevinsawicki suggested that it would be nice if Electron had a general-purpose way to expose `NSEvent`s. We're not going to prioritize making this happen right now, but if you're interested in working on a PR that explores how such an API might look, we'd be happy to help make it happen."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/283946825",
    "html_url": "https://github.com/electron/electron/issues/8689#issuecomment-283946825",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8689",
    "id": 283946825,
    "user": {
      "login": "pronebird",
      "id": 704044,
      "avatar_url": "https://avatars1.githubusercontent.com/u/704044?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pronebird",
      "html_url": "https://github.com/pronebird",
      "followers_url": "https://api.github.com/users/pronebird/followers",
      "following_url": "https://api.github.com/users/pronebird/following{/other_user}",
      "gists_url": "https://api.github.com/users/pronebird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pronebird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pronebird/subscriptions",
      "organizations_url": "https://api.github.com/users/pronebird/orgs",
      "repos_url": "https://api.github.com/users/pronebird/repos",
      "events_url": "https://api.github.com/users/pronebird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pronebird/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-03T12:59:10Z",
    "updated_at": "2017-03-03T12:59:40Z",
    "body": "@zeke I am concerned about exposing platform dependent APIs. Electron has fair share of them already and since menubar apps aren't exactly supported (i.e. we use BrowserWindow that fakes popover).\r\n\r\nI think native extension should cut it until Popovers are somehow added to Electron, which would be huge addition not only for menubar apps but generally for any kinds of apps."
  }
]